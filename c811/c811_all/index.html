<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch1 åŸºæœ¬æ¸¬é‡ - é¾é’åºœè€å¸«</title>
    <script>
        window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root { --primary: #2980b9; --success: #27ae60; --error: #e74c3c; --dark: #2c3e50; --bg: #f4f7f6; --banner: #2c3e50; }
        body { font-family: "Microsoft JhengHei", sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* æ©«å¹… */
        .header-banner { background: var(--banner); color: white; padding: 15px; text-align: center; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .header-banner h1 { margin: 0; font-size: 22px; letter-spacing: 2px; }

        .container { display: flex; margin-top: 60px; height: calc(100vh - 60px); }
        
        /* å´é‚Šæ¬„ */
        .sidebar { width: 200px; background: #34495e; padding: 20px; display: flex; flex-direction: column; gap: 15px; overflow-y: auto; }
        .sidebar button { padding: 12px; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; text-align: left; background: rgba(255,255,255,0.1); width: 100%; font-size: 14px; }
        .sidebar button:hover { background: var(--primary); }
        .sidebar .info-text { color: #bdc3c7; font-size: 12px; margin-top: auto; text-align: center; }

        /* ä¸»å…§å®¹å€ */
        .main-content { flex-grow: 1; padding: 20px; display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
        .quiz-card { background: white; width: 100%; max-width: 700px; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; margin-bottom: 20px; }
        
        /* è¡¨å–®å…ƒä»¶ */
        .form-group { text-align: left; margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: var(--dark); }
        select, input { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        .seat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        
        /* é¡Œç›®æ¨£å¼ */
        .section-tag { display: inline-block; background: var(--primary); color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; margin-bottom: 10px; }
        .question-text { font-size: 20px; text-align: left; line-height: 1.6; margin-bottom: 20px; font-weight: 600; }
        .option-btn { display: block; width: 100%; padding: 12px 15px; margin: 8px 0; border: 2px solid #eee; border-radius: 8px; background: white; text-align: left; font-size: 16px; cursor: pointer; transition: 0.2s; }
        .option-btn:hover:not(:disabled) { border-color: var(--primary); background: #f0f8ff; }
        .option-btn:disabled { cursor: default; }
        
        /* åœ–è¡¨å®¹å™¨ */
        .chart-container { position: relative; height: 300px; width: 100%; margin: 10px auto; display: none; }

        /* åé¥‹èˆ‡çµæœ */
        #feedback-box { display: none; margin-top: 15px; padding: 15px; border-radius: 8px; text-align: left; }
        .fb-correct { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .fb-wrong { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        
        .review-list { text-align: left; margin-top: 20px; background: #fff5f5; padding: 15px; border-radius: 8px; border: 1px solid #ffcccc; }
        .review-list li { margin-bottom: 8px; }

        /* æ‰‹æ©Ÿé©é… */
        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; flex-direction: row; padding: 10px; overflow-x: auto; }
            .sidebar button { width: auto; white-space: nowrap; }
            .main-content { padding: 10px; }
            .quiz-card { padding: 20px; }
        }
    </style>
</head>
<body>

<div class="header-banner"><h1>ç†åŒ– Ch1 åŸºæœ¬æ¸¬é‡ (32é¡Œ)</h1></div>

<div class="container">
    <div class="sidebar">
        <button onclick="window.open('chap811_review.pdf', '_blank')">ğŸ“„ é–±è®€è¬›ç¾©</button>
        <button onclick="location.reload()" style="background: var(--success);">ğŸ”„ é‡æ–°é–‹å§‹</button>
        <button onclick="location.href='../index.html'" style="background: #e67e22;">ğŸ  å›é¦–é </button>
        <div class="info-text">ç¸½åˆ† 100 åˆ†</div>
    </div>

    <div class="main-content">
        <div id="login-box" class="quiz-card">
            <h2>âœï¸ æ¸¬é©—ç™»éŒ„</h2>
            <div class="form-group"><label>ç­ç´šï¼š</label>
                <select id="user-class">
                    <option value="">è«‹é¸æ“‡</option>
                    <option value="801">801</option><option value="802">802</option>
                    <option value="803">803</option><option value="804">804</option><option value="805">805</option>
                </select>
            </div>
            <div class="form-group"><label>åº§è™Ÿï¼š</label>
                <div class="seat-grid">
                    <select id="no-ten"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select>
                    <select id="no-one"><option value="">å€‹ä½</option>
                        <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                        <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option>
                    </select>
                </div>
            </div>
            <div class="form-group"><label>å§“åï¼š</label><input type="text" id="user-name" placeholder="è«‹è¼¸å…¥å§“å"></div>
            <button onclick="startQuiz()" style="width:100%; padding:15px; background:var(--primary); color:white; border:none; border-radius:8px; font-size:18px; cursor:pointer;">é–‹å§‹æ¸¬é©—</button>
        </div>

        <div id="quiz-box" class="quiz-card" style="display:none;">
            <div id="section-info" class="section-tag"></div>
            <div id="progress-info" style="font-size:14px; color:#7f8c8d; margin-bottom:10px;"></div>
            
            <div class="chart-container" id="chart-wrapper">
                <canvas id="mvChart"></canvas>
            </div>

            <div id="q-text" class="question-text"></div>
            <div id="options-area"></div>

            <div id="feedback-box">
                <div id="fb-title" style="font-weight:bold;"></div>
                <div id="fb-content"></div>
                <button id="next-btn" onclick="nextQ()" style="margin-top:10px; padding:8px 20px; background:var(--dark); color:white; border:none; border-radius:5px; cursor:pointer;">ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>

        <div id="result-box" class="quiz-card" style="display:none;">
            <h2>æ¸¬é©—å®Œæˆ</h2>
            <h1 id="final-score" style="font-size:80px; color:var(--error); margin:10px 0;">0</h1>
            <div id="upload-msg" style="color:var(--primary); font-weight:bold; margin-bottom:20px;">è³‡æ–™ä¸Šå‚³ä¸­...</div>
            
            <div id="error-review" class="review-list" style="display:none;">
                <h3 style="color:var(--error); margin-top:0;">ğŸ’¡ éŒ¯é¡Œè¤‡ç¿’æ¸…å–®ï¼š</h3>
                <ul id="error-list"></ul>
            </div>
            <br>
            <button onclick="location.reload()" style="padding:10px 20px; cursor:pointer;">å†æ¬¡æŒ‘æˆ°</button>
        </div>
    </div>
</div>

<script>
    // æ‚¨çš„ Google Apps Script ç¶²å€
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxsTgZ3VBoP-LOrOLqsYUJiD-QLsD3nl2xJLBN7xy1KkG5LO1gaUioZ9hPHCuVidf0JbQ/exec";

    // é¡Œç›®è³‡æ–™åº« (å…±32é¡Œ)
    const questions = [
        // --- ç¬¬1éƒ¨åˆ†ï¼šå¯¦é©—å®¤å™¨æ (10é¡Œ, 3åˆ†) ---
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "é—œæ–¼å¯¦é©—å®¤çš„å®‰å…¨å®ˆå‰‡ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ", o: ["ç‚ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥åœ¨å¯¦é©—å®¤å…§åƒé›¶é£Ÿ", "ç¨€é‡‹æ¿ƒç¡«é…¸æ™‚ï¼Œæ‡‰å°‡æ°´ç·©æ…¢å€’å…¥æ¿ƒç¡«é…¸ä¸­", "èæ°£é«”æ°£å‘³æ™‚ï¼Œæ‡‰é¼»å­ç›´æ¥é è¿‘å®¹å™¨å£å¸æ°£", "æ¬²ç†„æ»…é…’ç²¾ç‡ˆæ™‚ï¼Œæ‡‰ä½¿ç”¨ç‡ˆç½©è“‹ç†„ï¼Œä¸å¯ç”¨å˜´å¹ç†„"], a: 3, e: "ç†„æ»…é…’ç²¾ç‡ˆå¿…é ˆä½¿ç”¨ç‡ˆç½©è“‹ç†„ï¼Œé¿å…å›ç«ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "é‡ç­’çš„ä¸»è¦ç”¨é€”ç‚ºä½•ï¼Ÿ", o: ["æ¸¬é‡æ¶²é«”çš„é«”ç©", "åŠ ç†±æ¶²é«”", "é€²è¡ŒåŒ–å­¸åæ‡‰çš„å®¹å™¨", "æ¸¬é‡å›ºé«”çš„è³ªé‡"], a: 0, e: "é‡ç­’å°ˆé–€ç”¨æ–¼æ¸¬é‡é«”ç©ï¼Œä¸å¯åŠ ç†±ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "ä½¿ç”¨é‡ç­’æ¸¬é‡æ°´é«”ç©æ™‚ï¼Œè¦–ç·šæ‡‰å¦‚ä½•è§€å¯Ÿï¼Ÿ", o: ["å°æº–æ¶²é¢é‚Šç·£æœ€é«˜è™•", "å°æº–æ¶²é¢ä¸­å¤®å‡¹è™•æœ€ä½é»ä¸”è¦–ç·šæ°´å¹³", "ç”±ä¸Šå¾€ä¸‹ä¿¯è¦–", "ç”±ä¸‹å¾€ä¸Šä»°è¦–"], a: 1, e: "è¦–ç·šéœ€æ°´å¹³å°æº–å‡¹æ¶²é¢æœ€ä½é»ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "å¦‚æœä¸å°å¿ƒå°‡é…¸æ¶²æ²¾åˆ°çš®è†šï¼Œæ‡‰å¦‚ä½•è™•ç†ï¼Ÿ", o: ["å¡—æŠ¹é¹¼æ¶²ä¸­å’Œ", "ç”¨å¤§é‡æ¸…æ°´æ²–æ´—", "ç”¨è¡›ç”Ÿç´™æ“¦ä¹¾å³å¯", "å¡—æŠ¹ç¢˜é…’æ¶ˆæ¯’"], a: 1, e: "æ‡‰ç«‹å³ç”¨å¤§é‡æ¸…æ°´æ²–æ´—ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "ä¸‹åˆ—å“ªä¸€ç¨®å™¨æå¯ä»¥ç›´æ¥åŠ ç†±ï¼Œä¸éœ€è¦å¢Šé™¶ç“·çº–ç¶­ç¶²ï¼Ÿ", o: ["ç‡’æ¯", "éŒå½¢ç“¶", "è©¦ç®¡", "é‡ç­’"], a: 2, e: "è©¦ç®¡å¯ç›´æ¥åŠ ç†±ï¼Œç‡’æ¯éœ€å¢Šç¶²ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "ä½¿ç”¨æ»´ç®¡å¸å–æ¶²é«”å¾Œï¼Œä¸‹åˆ—æ“ä½œä½•è€…éŒ¯èª¤ï¼Ÿ", o: ["ä¿æŒæ»´ç®¡å°–ç«¯æœä¸‹", "è¼•å£“æ©¡çš®å¸½æ§åˆ¶æ»´æ•¸", "å°‡æ»´ç®¡å€’æŒï¼Œé¿å…æ¶²é«”æ»´è½", "ä¸å¯ç›´æ¥å°‡æ»´ç®¡ä¼¸å…¥åˆ¥çš„è©¦åŠ‘ç“¶ä¸­ä»¥å…æ±™æŸ“"], a: 2, e: "æ»´ç®¡å€’æŒæœƒä½¿æ¶²é«”æµå…¥æ©¡çš®å¸½ï¼Œè…è•æ©¡çš®ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "é…’ç²¾ç‡ˆå…§çš„é…’ç²¾é‡ï¼Œæœ€å¥½ç¶­æŒåœ¨å¤šå°‘å®¹é‡æ¯”è¼ƒå®‰å…¨ï¼Ÿ", o: ["å…¨æ»¿", "1/3 ~ 2/3 ä¹‹é–“", "å°‘æ–¼ 1/4", "åªè¦æœ‰é…’ç²¾å³å¯"], a: 1, e: "é…’ç²¾é‡ç¶­æŒåœ¨ 1/3~2/3 æœ€å®‰å…¨ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "ä¸‹åˆ—é—œæ–¼å¯¦é©—å™¨æçš„æ•˜è¿°ï¼Œä½•è€…éŒ¯èª¤ï¼Ÿ", o: ["ç‡’æ¯é©åˆç”¨ä¾†é…è£½æº¶æ¶²", "å¤©å¹³æ˜¯ç”¨ä¾†æ¸¬é‡é‡é‡çš„å·¥å…·", "é™¶ç“·çº–ç¶­ç¶²çš„åŠŸèƒ½æ˜¯è®“åŠ ç†±å‡å‹»", "æº«åº¦è¨ˆä¸å¯ç•¶ä½œæ”ªæ‹Œæ£’ä½¿ç”¨"], a: 1, e: "å¤©å¹³æ˜¯ç”¨ä¾†æ¸¬é‡ã€Œè³ªé‡ã€çš„ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "åŠ ç†±è©¦ç®¡ä¸­çš„æ¶²é«”æ™‚ï¼Œè©¦ç®¡å£æ‡‰æœå‘ä½•è™•ï¼Ÿ", o: ["æœå‘è‡ªå·±ï¼Œæ–¹ä¾¿è§€å¯Ÿ", "æœå‘åŒå­¸ï¼Œæ–¹ä¾¿å±•ç¤º", "å‚ç›´å‘ä¸Š", "ç„¡äººçš„æ–¹å‘"], a: 3, e: "é¿å…æ¶²é«”å™´æ¿ºå‚·äººï¼Œæ‡‰æœå‘ç„¡äººè™•ã€‚" },
        { s: "Part 1: å¯¦é©—å™¨æ", p: 3, q: "é€²å…¥å¯¦é©—å®¤å¾Œï¼Œä¸‹åˆ—å“ªä¸€å€‹å‹•ä½œæ˜¯ç¦æ­¢çš„ï¼Ÿ", o: ["æ‰“é–‹çª—æˆ¶ä¿æŒé€šé¢¨", "æª¢æŸ¥å™¨ææ˜¯å¦æœ‰ç ´æ", "æœªç¶“è€å¸«è¨±å¯æ“…è‡ªæ··åˆè—¥å“", "è©³è®€å¯¦é©—æ­¥é©Ÿ"], a: 2, e: "åš´ç¦æ“…è‡ªæ··åˆè—¥å“ã€‚" },

        // --- ç¬¬2éƒ¨åˆ†ï¼šæ¸¬é‡ (15é¡Œ, 3åˆ†) ---
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "é—œæ–¼ã€Œæ¸¬é‡çµæœã€çš„ç´€éŒ„ï¼Œä¸‹åˆ—ä½•è€…æ˜¯æ­£ç¢ºä¸”å®Œæ•´çš„ï¼Ÿ", o: ["æ›¸æ¡Œé•·åº¦ 150", "é£²æ–™é«”ç© 500", "é‰›ç­†é•·åº¦ 15.25 å…¬åˆ†", "é«”é‡ 60 å·¦å³"], a: 2, e: "æ¸¬é‡çµæœé ˆåŒ…å«æ•¸å­—èˆ‡å–®ä½ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "æŸç›´å°ºçš„æœ€å°åˆ»åº¦ç‚º 1mmï¼Œæ¸¬é‡ä¸€æç­†é•·åº¦è¨˜ç‚º 12.35 cmã€‚è«‹å•å“ªä¸€å€‹æ•¸å­—æ˜¯ã€Œä¼°è¨ˆå€¼ã€ï¼Ÿ", o: ["1", "2", "3", "5"], a: 3, e: "å€’æ•¸ç¬¬ä¸€ä½ç‚ºä¼°è¨ˆå€¼ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "ä½¿ç”¨ä¸Šçš¿å¤©å¹³æ¸¬é‡ç‰©é«”å‰ï¼ŒæŒ‡é‡åå‘å·¦é‚Šï¼Œæ‡‰å¦‚ä½•èª¿æ•´æ ¡æº–èºçµ²ï¼Ÿ", o: ["å°‡å·¦é‚Šèºçµ²å‘å¤–æ—‹å‡º", "å°‡å³é‚Šèºçµ²å‘å¤–æ—‹å‡º", "å°‡å³é‚Šèºçµ²å‘å…§æ—‹å…¥", "ç›´æ¥æ¸¬é‡"], a: 1, e: "å·¦é‚Šé‡ï¼Œæ‡‰å°‡å³é‚Šèºçµ²æ—‹å‡ºï¼ˆå¢åŠ å³é‚ŠåŠ›è‡‚é‡é‡ï¼‰æˆ–å·¦é‚Šæ—‹å…¥ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "é—œæ–¼ã€Œè³ªé‡ã€èˆ‡ã€Œé‡é‡ã€çš„æ¯”è¼ƒï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ", o: ["åœ¨æœˆçƒä¸Šï¼Œç‰©é«”çš„è³ªé‡æœƒè®Šå°", "åœ¨æœˆçƒä¸Šï¼Œç‰©é«”çš„é‡é‡æœƒè®Šå°", "åŒä¸€ç‰©é«”åœ¨åœ°çƒå„åœ°çš„é‡é‡éƒ½ç›¸åŒ", "å¤©å¹³æ˜¯ç”¨ä¾†æ¸¬é‡é‡é‡çš„"], a: 1, e: "é‡é‡éš¨å¼•åŠ›æ”¹è®Šï¼Œè³ªé‡ä¸è®Šã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "æ¬²æ¸¬é‡ä¸€é¡†ä¸è¦å‰‡çŸ³é ­çš„é«”ç©ï¼Œæœ€é©åˆçš„æ–¹æ³•æ˜¯ï¼Ÿ", o: ["ç›´æ¥ç”¨ç›´å°ºæ¸¬é‡", "æ”¾å…¥è£æ°´çš„é‡ç­’ä¸­ï¼Œåˆ©ç”¨æ’æ°´æ³•æ¸¬é‡", "æ”¾åœ¨å¤©å¹³ä¸Šæ¸¬é‡", "ç£¨æˆç²‰æœ«å¾Œæ”¾å…¥é‡ç­’"], a: 1, e: "æ’æ°´æ³•é©ç”¨æ–¼ä¸æº¶æ–¼æ°´çš„ä¸è¦å‰‡å›ºé«”ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "å¯†åº¦ç‚º $0.8\\ g/cm^3$ çš„æœ¨å¡Šï¼ŒæŠ•å…¥æ°´ä¸­æœƒå¦‚ä½•ï¼Ÿ", o: ["æ²‰å…¥æ°´åº•", "æµ®åœ¨æ°´é¢ä¸Š", "æ‡¸æµ®åœ¨æ°´ä¸­é–“", "ç„¡æ³•åˆ¤æ–·"], a: 1, e: "å¯†åº¦å°æ–¼æ°´ (1.0)ï¼Œæ•…ä¸Šæµ®ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "æ°´çš„å¯†åº¦åœ¨å¹¾åº¦ C æ™‚æœ€å¤§ï¼Ÿ", o: ["0Â°C", "4Â°C", "100Â°C", "ä»»ä½•æº«åº¦éƒ½ä¸€æ¨£"], a: 1, e: "æ°´åœ¨ 4Â°C æ™‚é«”ç©æœ€å°ã€å¯†åº¦æœ€å¤§ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "ç”²ã€ä¹™å…©ç‰©é«”çš„é«”ç©ç›¸åŒï¼Œä½†ç”²çš„è³ªé‡æ˜¯ä¹™çš„ 3 å€ï¼Œå‰‡ç”²çš„å¯†åº¦æ˜¯ä¹™çš„å¹¾å€ï¼Ÿ", o: ["1/3 å€", "1 å€", "3 å€", "9 å€"], a: 2, e: "D = M/Vï¼ŒVå›ºå®šï¼ŒD èˆ‡ M æˆæ­£æ¯”ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "åœ¨ä½¿ç”¨ä¸Šçš¿å¤©å¹³æ™‚ï¼Œç‰©é«”èˆ‡ç ç¢¼æ‡‰å¦‚ä½•æ”¾ç½®ï¼Ÿ", o: ["å·¦ç›¤æ”¾ç ç¢¼ï¼Œå³ç›¤æ”¾ç‰©é«”", "å·¦ç›¤æ”¾ç‰©é«”ï¼Œå³ç›¤æ”¾ç ç¢¼", "éš¨æ„æ”¾ç½®", "æ”¾åŒä¸€ç›¤"], a: 1, e: "å·¦ç‰©å³ç¢¼ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "ä¸€å¡Šé‹å¡Šåˆ‡æˆå¤§å°ä¸ç­‰çš„å…©å¡Šï¼Œé—œæ–¼é€™å…©å¡Šé‹å¡Šçš„æ€§è³ªï¼Œä¸‹åˆ—ä½•è€…ã€Œç›¸åŒã€ï¼Ÿ", o: ["è³ªé‡", "é«”ç©", "å¯†åº¦", "é‡é‡"], a: 2, e: "å¯†åº¦æ˜¯ç‰©è³ªç‰¹æ€§ï¼Œä¸éš¨å¤§å°æ”¹è®Šã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "æ¸¬é‡æ™‚è‹¥è¦æ¸›å°‘èª¤å·®ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ï¼Ÿ", o: ["é¸ç”¨åˆ»åº¦è¼ƒå¤§çš„å„€å™¨", "è«‹è¦–åŠ›æœ€å¥½çš„äººæ¸¬é‡", "å¤šæ¬¡æ¸¬é‡æ±‚å¹³å‡å€¼", "æ†‘ç›´è¦ºä¼°è¨ˆ"], a: 2, e: "å¤šæ¬¡æ¸¬é‡æ±‚å¹³å‡å€¼å¯æ¸›å°‘èª¤å·®ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "å°è¯ç”¨æœ€å°åˆ»åº¦ç‚º cm çš„æ²å°ºæ¸¬é‡æ•™å®¤å¯¬åº¦ï¼Œç´€éŒ„ç‚º 6.50 å…¬å°ºã€‚æ­¤ç´€éŒ„æ˜¯å¦æ­£ç¢ºï¼Ÿ", o: ["æ­£ç¢º", "ä¸æ­£ç¢ºï¼Œæ‡‰ç´€éŒ„ç‚º 6.5 å…¬å°º", "ä¸æ­£ç¢ºï¼Œæ‡‰ç´€éŒ„ç‚º 6.500 å…¬å°º", "ä¸æ­£ç¢ºï¼Œå–®ä½éŒ¯èª¤"], a: 2, e: "6.50m = 650cmï¼Œä¼°è¨ˆåˆ° 0.1cm (mm)ï¼Œç¬¦åˆ cm çš„ä¸‹ä¸€ä½ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "å·²çŸ¥å†°çš„å¯†åº¦ç‚º $0.9\\ g/cm^3$ï¼Œå°‡é«”ç© $100\\ cm^3$ çš„å†°å¡Šå®Œå…¨ç†”åŒ–æˆæ°´å¾Œï¼Œæ°´çš„é«”ç©ç´„ç‚ºå¤šå°‘ï¼Ÿ", o: ["90 cmÂ³", "100 cmÂ³", "110 cmÂ³", "900 cmÂ³"], a: 0, e: "è³ªé‡å®ˆæ†ï¼š100x0.9=90gï¼Œæ°´å¯†åº¦1ï¼Œæ•…é«”ç©90ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "å°‡ 100g çš„æ°´ç”± 4Â°C åŠ ç†±è‡³ 10Â°Cï¼Œå…¶é«”ç©èˆ‡å¯†åº¦çš„è®ŠåŒ–ç‚ºä½•ï¼Ÿ", o: ["é«”ç©è®Šå¤§ï¼Œå¯†åº¦è®Šå°", "é«”ç©è®Šå°ï¼Œå¯†åº¦è®Šå¤§", "é«”ç©è®Šå¤§ï¼Œå¯†åº¦è®Šå¤§", "é«”ç©ä¸è®Šï¼Œå¯†åº¦ä¸è®Š"], a: 0, e: "4Â°Cä»¥ä¸Šç†±è„¹ï¼Œé«”ç©è®Šå¤§ï¼Œå¯†åº¦è®Šå°ã€‚" },
        { s: "Part 2: æ¸¬é‡èˆ‡å¯†åº¦", p: 3, q: "ä½¿ç”¨é›»å­å¤©å¹³æ¸¬é‡è—¥å“ç²‰æœ«çš„è³ªé‡æ™‚ï¼Œä¸‹åˆ—æ“ä½œæ­¥é©Ÿä½•è€…æ­£ç¢ºï¼Ÿ", o: ["ç›´æ¥å°‡è—¥å“ç²‰æœ«å€’åœ¨ç§¤ç›¤ä¸Š", "å…ˆæ”¾ç¨±é‡ç´™ï¼Œè¨˜éŒ„è³ªé‡å¾Œå†ç›¸æ¸›", "å…ˆæ”¾ç¨±é‡ç´™ï¼ŒæŒ‰ä¸‹æ­¸é›¶(TARE)å¾Œå†æ”¾è—¥å“", "ä¸éœ€è¦æ­¸é›¶"], a: 2, e: "ä½¿ç”¨ TARE éµæ‰£é™¤å®¹å™¨é‡é‡æœ€æº–ç¢ºæ–¹ä¾¿ã€‚" },

        // --- ç¬¬3éƒ¨åˆ†ï¼šç¶œåˆæ‡‰ç”¨ (5é¡Œ, 3åˆ†) ---
        { s: "Part 3: ç¶œåˆæ‡‰ç”¨", p: 3, q: "ç”²(å¯†åº¦2)ã€ä¹™(å¯†åº¦1)å…©æ¶²é«”ç­‰è³ªé‡æ··åˆï¼Œæ··åˆå¾Œå¯†åº¦ç‚ºä½•ï¼Ÿ", o: ["1.5 g/cmÂ³", "1.33 g/cmÂ³", "3.0 g/cmÂ³", "1.2 g/cmÂ³"], a: 1, e: "D = 2M / (M/2 + M/1) = 1.33ã€‚" },
        { s: "Part 3: ç¶œåˆæ‡‰ç”¨", p: 3, q: "ä¸‰å€‹ç›¸åŒç‡’æ¯åˆ†åˆ¥è£ç­‰è³ªé‡çš„æ°´ã€é…’ç²¾(0.8)ã€æ°´éŠ€(13.6)ï¼Œæ¶²é¢é«˜åº¦ç”±é«˜åˆ°ä½ç‚ºï¼Ÿ", o: ["æ°´éŠ€ > æ°´ > é…’ç²¾", "é…’ç²¾ > æ°´ > æ°´éŠ€", "æ°´ > é…’ç²¾ > æ°´éŠ€", "ç›¸åŒ"], a: 1, e: "è³ªé‡åŒï¼Œå¯†åº¦è¶Šå°é«”ç©è¶Šå¤§ï¼Œé«˜åº¦è¶Šé«˜ã€‚" },
        { s: "Part 3: ç¶œåˆæ‡‰ç”¨", p: 3, q: "ã€M-Våœ–å½¢é¡Œã€‘<br>ä¸‹åœ–ç‚ºæŸç‰©è³ªçš„è³ªé‡-é«”ç©é—œä¿‚åœ–ã€‚ç•¶é«”ç©ç‚º $30\\ cm^3$ æ™‚ï¼Œè³ªé‡ç‚º $60g$ã€‚è«‹å•æ­¤ç‰©è³ªå¯†åº¦ç‚ºä½•ï¼Ÿ", o: ["0.5 g/cmÂ³", "2.0 g/cmÂ³", "30 g/cmÂ³", "90 g/cmÂ³"], a: 1, e: "D = M/V = 60/30 = 2.0ã€‚", hasChart: true },
        { s: "Part 3: ç¶œåˆæ‡‰ç”¨", p: 3, q: "(æ‰¿ä¸Šé¡Œ) è‹¥å–é«”ç© $10\\ cm^3$ çš„è©²ç‰©è³ªï¼Œå…¶å¯†åº¦æœƒè®Šæˆå¤šå°‘ï¼Ÿ", o: ["0.5 g/cmÂ³", "2.0 g/cmÂ³", "è®Šå°", "è®Šå¤§"], a: 1, e: "å¯†åº¦æ˜¯ç‰©è³ªç‰¹æ€§ï¼Œä¸éš¨é«”ç©æ”¹è®Šã€‚" },
        { s: "Part 3: ç¶œåˆæ‡‰ç”¨", p: 3, q: "(æ‰¿ä¸Šé¡Œ) è‹¥å°‡æ­¤ç‰©è³ªæŠ•å…¥æ°´ä¸­ (æ°´å¯†åº¦ 1.0)ï¼Œå‰‡æ­¤ç‰©è³ªæœƒï¼Ÿ", o: ["æµ®åœ¨æ°´é¢ä¸Š", "æ²‰å…¥æ°´åº•", "æ‡¸æµ®åœ¨æ°´ä¸­", "å…ˆæ²‰å¾Œæµ®"], a: 1, e: "å¯†åº¦ 2.0 > 1.0ï¼Œæ•…ä¸‹æ²‰ã€‚" },

        // --- ç¬¬4éƒ¨åˆ†ï¼šå¯¦é©—é¡Œ (2é¡Œ, 5åˆ†) ---
        { s: "Part 4: å¯¦é©—é¡Œ", p: 5, q: "æŸé‡‘å±¬å¡Šè³ªé‡ 54gï¼ŒæŠ•å…¥ç››æ»¿æ°´çš„ç‡’æ¯ä¸­ï¼Œæº¢å‡º 20g çš„æ°´ã€‚æ±‚æ­¤é‡‘å±¬å¡Šçš„å¯†åº¦ï¼Ÿ", o: ["2.7 g/cmÂ³", "5.4 g/cmÂ³", "0.37 g/cmÂ³", "2.0 g/cmÂ³"], a: 0, e: "æº¢å‡ºæ°´é‡ = ç‰©é«”é«”ç© = 20cmÂ³ã€‚D = 54/20 = 2.7ã€‚" },
        { s: "Part 4: å¯¦é©—é¡Œ", p: 5, q: "æ¸¬é‡æ¶²é«”å¯†åº¦å¯¦é©—ï¼šé‡ç­’è£æ¶²é«”å¾Œæ¸¬ç¸½é‡ã€‚<br>V=10æ™‚ç¸½é‡35gï¼›V=20æ™‚ç¸½é‡45gã€‚<br>è«‹å•ã€Œç©ºé‡ç­’ã€è³ªé‡ç‚ºå¤šå°‘ï¼Ÿ", o: ["10g", "15g", "25g", "35g"], a: 2, e: "æ¶²é«”å¯†åº¦ = (45-35)/(20-10) = 1ã€‚ç©ºç­’ = 35 - 10*1 = 25gã€‚" }
    ];

    let currentIdx = 0;
    let score = 0;
    let detailLog = [];
    let errorNotes = [];
    let mvChart = null;

    // å•Ÿå‹•æ¸¬é©—
    function startQuiz() {
        if (!document.getElementById('user-name').value || document.getElementById('no-one').value === "") {
            alert("è«‹å®Œæ•´å¡«å¯«ç­ç´šã€åº§è™Ÿèˆ‡å§“åï¼");
            return;
        }
        document.getElementById('login-box').style.display = 'none';
        document.getElementById('quiz-box').style.display = 'block';
        loadQuestion();
    }

    // è¼‰å…¥é¡Œç›®
    function loadQuestion() {
        const q = questions[currentIdx];
        
        // æ›´æ–°æ¨™é¡Œèˆ‡é€²åº¦
        document.getElementById('section-info').innerText = q.s;
        document.getElementById('progress-info').innerText = `é¡Œè™Ÿï¼š${currentIdx + 1} / ${questions.length} (æœ¬é¡Œ ${q.p} åˆ†)`;
        
        // è™•ç†åœ–è¡¨é¡¯ç¤º
        const chartWrapper = document.getElementById('chart-wrapper');
        if (q.hasChart) {
            chartWrapper.style.display = 'block';
            drawMVChart();
        } else {
            chartWrapper.style.display = 'none';
        }

        // é¡¯ç¤ºé¡Œç›®èˆ‡é¸é …
        document.getElementById('q-text').innerHTML = q.q;
        let html = '';
        q.o.forEach((opt, idx) => {
            html += `<button class="option-btn" onclick="checkAnswer(${idx})">${String.fromCharCode(65 + idx)}. ${opt}</button>`;
        });
        document.getElementById('options-area').innerHTML = html;
        document.getElementById('feedback-box').style.display = 'none';
        
        // é‡æ–°æ¸²æŸ“æ•¸å­¸å…¬å¼
        if (window.MathJax) MathJax.typesetPromise();
    }

    // ç¹ªè£½ M-V åœ– (Chart.js)
    function drawMVChart() {
        const ctx = document.getElementById('mvChart').getContext('2d');
        if (mvChart) mvChart.destroy(); // æ¸…é™¤èˆŠåœ–è¡¨

        mvChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [0, 10, 20, 30, 40],
                datasets: [{
                    label: 'ç‰©è³ª M-V é—œä¿‚ç·š',
                    data: [0, 20, 40, 60, 80],
                    borderColor: '#2980b9',
                    backgroundColor: 'rgba(41, 128, 185, 0.2)',
                    borderWidth: 2,
                    pointRadius: 5,
                    fill: false,
                    tension: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { title: { display: true, text: 'é«”ç© (cmÂ³)', font: {size: 14, weight: 'bold'} }, min: 0 },
                    y: { title: { display: true, text: 'è³ªé‡ (g)', font: {size: 14, weight: 'bold'} }, min: 0 }
                },
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'è³ªé‡ vs é«”ç©', font: {size: 16} }
                }
            }
        });
    }

    // æª¢æŸ¥ç­”æ¡ˆ
    function checkAnswer(selectedIdx) {
        const q = questions[currentIdx];
        const isCorrect = (selectedIdx === q.a);
        
        // è¨˜éŒ„èˆ‡è¨ˆåˆ†
        detailLog.push(isCorrect ? "å°" : "éŒ¯");
        if (isCorrect) score += q.p;
        else errorNotes.push(`é¡Œè™Ÿ ${currentIdx + 1}ï¼š${q.q.replace(/<br>/g, "").substring(0, 15)}...`);

        // é¡¯ç¤ºåé¥‹
        const fbBox = document.getElementById('feedback-box');
        fbBox.style.display = 'block';
        fbBox.className = isCorrect ? 'fb-correct' : 'fb-wrong';
        document.getElementById('fb-title').innerText = isCorrect ? "âœ… ç­”å°äº†ï¼" : "âŒ ç­”éŒ¯äº†...";
        document.getElementById('fb-content').innerText = q.e;

        // é–å®šæŒ‰éˆ•
        document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);
    }

    // ä¸‹ä¸€é¡Œ
    function nextQ() {
        currentIdx++;
        if (currentIdx < questions.length) {
            loadQuestion();
        } else {
            showResult();
        }
    }

    // é¡¯ç¤ºçµæœä¸¦ä¸Šå‚³
    function showResult() {
        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('result-box').style.display = 'block';
        document.getElementById('final-score').innerText = score;

        // é¡¯ç¤ºéŒ¯é¡Œæ¸…å–®
        if (errorNotes.length > 0) {
            document.getElementById('error-review').style.display = 'block';
            document.getElementById('error-list').innerHTML = errorNotes.map(err => `<li>${err}</li>`).join('');
        } else {
            document.getElementById('error-review').style.display = 'none';
        }

        // ä¸Šå‚³è³‡æ–™
        const seatNo = (parseInt(document.getElementById('no-ten').value) * 10 + parseInt(document.getElementById('no-one').value)).toString().padStart(2, '0');
        const params = new URLSearchParams({
            quiz: "ç†åŒ–Ch1-åŸºæœ¬æ¸¬é‡",
            class: document.getElementById('user-class').value,
            no: seatNo,
            name: document.getElementById('user-name').value,
            score: score,
            details: detailLog.join(",")
        });

        fetch(`${SCRIPT_URL}?${params.toString()}`, { method: 'GET', mode: 'no-cors' })
            .then(() => {
                document.getElementById('upload-msg').innerText = "âœ… æˆç¸¾å·²æˆåŠŸç™»éŒ„è‡³é›²ç«¯è©¦ç®—è¡¨";
                document.getElementById('upload-msg').style.color = "#27ae60";
            })
            .catch(err => {
                document.getElementById('upload-msg').innerText = "âŒ ä¸Šå‚³å¤±æ•—ï¼Œè«‹æˆªåœ–æˆç¸¾çµ¦è€å¸«";
                document.getElementById('upload-msg').style.color = "#c0392b";
            });
    }
</script>

</body>
</html>